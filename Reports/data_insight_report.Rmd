---
title: 'Regional Longitudinal Analysis of Antidepressant Prescribing'
output: html_document
date: "2025-02-14"
---

```{r setup, include=FALSE, eval=TRUE}
knitr::opts_knit$set(root.dir = rprojroot::find_root(criterion = rprojroot::is_rstudio_project))
```

# Task

You are a regional Public Health Analyst and you have been asked to write a report.
This report will describe and analyse antidepressant prescribing in your region.
The title of this report is 'Regional Longitudinal Analysis of Antidepressant Prescribing'.
Longitudinal just means the analysis is over an extended period of time, which we have with 4 years of monthly data.
The report is to be split into two sections:

Part One: To set the context for the report, a directed national-level reporting will be conducted.
Part Two: The will be followed-up by a more open-ended region specific analysis.


# Part One

Part One is a directed analysis and the same content needs to be covered by both streams.
These required content for Part One is: 

1. Line Chart: Total antidepressant prescribing per region, for all months (items).
2. Line Chart: Monthly cost of antidepressant prescribing per region, for all months.
3. Table: Total antidepressant prescribing per region (items, requires a pivot).
4. Table: Annual cost of antidepressant prescribing per region (requires a pivot).
5. Bar Chart: The 10 most prescribed anti-depressants in 2024 (items).
6. Bar Chart: The 10 anti-depressants with th greatest total cost in 2024.

You need to write some text to accompany the charts.
Try and make text between sections flow, so the report reads well.
You will be able to compare the contrasting item and cost values for each pair of charts/tables. 


# Part Two Overview

Part Two is a more open-ended analysis and different content is to be covered by each stream.
Each stream is described below:

Stream one: if you completed the aggregating data and visualising data exercises (2 exercises).
Stream two: if you completed the aggregating data, visualising data and data metrics exercises (3 exercises).

Stream one: you will use the filtered (just antidepressants) dataset that has ~10k rows.
Stream two: you will use the complete (all drugs) dataset that has ~480k rows.


# Part Two Stream One

Choose a region, such as the region where you live.
You need to create some analyses that 



# Part Two Stream Two

4. Boxplot: distribution of monthly percentage values
5. Select a Region of your choice. 

Stream one: if you completed the aggregating data and visualising data exercises. 

This report will contain a few things:



- Line Chart: Monthly percentage of all prescribing costs that are for antidepressants per region, for all months.
- Bar chart: Mean monthly 
- Boxplot: Distribution of 


Write a report using a mixture of code and text.
The code must run otherwise the report can not be 'knit' into a html (or pdf) document.




## Introduction


## Overview



# Regional monthly cost of anti depp



```{r}
data %>% 
  filter(YEAR == 2024) %>% 
  group_by(DRUG) %>% 
  summarise(COST = sum(ITEMS)) %>% 
  ungroup() %>% 
  top_n(10, COST) %>% 
  arrange(desc(COST))

data %>% 
  filter(YEAR == 2021) %>% 
  group_by(DRUG) %>% 
  summarise(COST = sum(COST)) %>% 
  ungroup() %>% 
  top_n(10, COST) %>% 
  arrange(desc(COST))

```

```{r}
df = readRDS("Data/EXTENSION_STEP_UP_REGIONAL_ANTIDEPRESSANTS.Rds")
```

```{r}

```

```{r}

```

```{r}

```

```{r}

```

```{r}

```

```{r}

```

